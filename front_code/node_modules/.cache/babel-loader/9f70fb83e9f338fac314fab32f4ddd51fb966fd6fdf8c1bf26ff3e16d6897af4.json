{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport { reactive } from 'vue';\nexport default {\n  name: \"LRegister\",\n  data() {\n    return {\n      to: \"\",\n      code: \"\",\n      isDragging: false,\n      startX: 0,\n      thumbPosition: 0,\n      isVerified: false,\n      sliderWidth: 0,\n      yanzhang: \"发送验证码\",\n      data: reactive({}),\n      phonepu: false,\n      codepu: false,\n      isChecked: false,\n      truepu: false,\n      cuow: false\n    };\n  },\n  methods: {\n    //人机滑块验证\n    handleMouseDown(event) {\n      this.isDragging = true;\n      this.startX = event.clientX - this.thumbPosition;\n      document.addEventListener('mousemove', this.handleMouseMove);\n      document.addEventListener('mouseup', this.handleMouseUp);\n    },\n    handleMouseMove(event) {\n      if (this.isDragging) {\n        const distance = event.clientX - this.startX;\n        this.thumbPosition = Math.min(Math.max(distance, 0), this.sliderWidth);\n      }\n    },\n    handleMouseUp() {\n      this.isDragging = false;\n      document.removeEventListener('mousemove', this.handleMouseMove);\n      document.removeEventListener('mouseup', this.handleMouseUp);\n      // 验证滑块是否移动到最右侧\n      this.isVerified = this.thumbPosition === this.sliderWidth;\n      if (!this.isVerified) this.thumbPosition = 0;\n    },\n    // 发送验证码\n    sendCode() {\n      // 邮箱\n      const emailRegex = /^[a-zA-Z0-9._%+-]+@qq.com$/;\n      // 电话\n      const phoneRegex = /^\\d{11}$/;\n      if (emailRegex.test(this.to) || phoneRegex.test(this.to)) {\n        this.yanzhang = '发送成功';\n        this.phonepu = false;\n        axios.get(\"http://localhost:8082/api/comsumer/login_before/register/mail_ObtainCode\", {\n          params: {\n            to: this.to\n          }\n        }).then(response => {\n          this.$store.commit('mailBoxUP', this.to);\n          this.data = response.data.data;\n          console.log(this.data);\n        });\n      } else {\n        this.yanzhang = '发送验证码';\n        this.phonepu = true;\n      }\n    },\n    // 下一步跳转\n    gotolast() {\n      axios.post(\"http://localhost:8082/api/comsumer/login_before/register/mail_ProofCode\", {\n        to: this.to,\n        code: this.code\n      }).then(response => {\n        if (response.data.code == 200) {\n          this.codepu = false;\n          if (this.truepu && this.isVerified) {\n            this.$router.push('/LRegisterA');\n            this.cuow = false;\n          } else this.cuow = true;\n        } else {\n          this.codepu = true;\n          this.yanzhang = '发送验证码';\n        }\n      });\n    }\n  },\n  mounted() {\n    this.sliderWidth = this.$el.querySelector('.captcha-slider').offsetWidth - this.$el.querySelector('.captcha-slider-thumb').offsetWidth;\n  }\n};","map":{"version":3,"names":["axios","reactive","name","data","to","code","isDragging","startX","thumbPosition","isVerified","sliderWidth","yanzhang","phonepu","codepu","isChecked","truepu","cuow","methods","handleMouseDown","event","clientX","document","addEventListener","handleMouseMove","handleMouseUp","distance","Math","min","max","removeEventListener","sendCode","emailRegex","phoneRegex","test","get","params","then","response","$store","commit","console","log","gotolast","post","$router","push","mounted","$el","querySelector","offsetWidth"],"sources":["src/components/logIn/LRegister.vue"],"sourcesContent":["<!-- 用户注册 -->\r\n<template>\r\n    <div>\r\n        <img class=\"back\" src=\"../../../public/logIn/logF.png\" alt=\"\" @click=\"$router.go(-1)\">\r\n        <span class=\"title\">注&nbsp;册</span>\r\n        <span class=\"xian\"></span>\r\n        <input class=\"zhanghao\" type=\"text\" placeholder=\"邮箱 / 手机号\" v-model=\"to\">\r\n        <div>\r\n            <div class=\"captcha-slider\" :class=\"{ 'is-dragging': isDragging }\">\r\n                <div class=\"captcha-slider-thumb\" :style=\"{ left: thumbPosition + 'px' }\" @mousedown=\"handleMouseDown\">\r\n                </div>\r\n                请按住滑块，拖到最右边\r\n            </div>\r\n            <div v-if=\"isVerified\" class=\"captcha-verified\">验证成功!</div>\r\n            <div v-if=\"!isVerified\" class=\"tome\" :style=\"{ width: thumbPosition + 5 + 'px' }\"></div>\r\n        </div>\r\n        <input class=\"code\" type=\"text\" placeholder=\"验证码\" v-model=\"code\">\r\n        <div class=\"sending\" @click=\"sendCode\">{{ yanzhang }}</div>\r\n        <button @click=\"gotolast\">下&nbsp;一&nbsp;步</button>\r\n        <li>\r\n            <input type=\"checkbox\" v-model=\"truepu\" style=\"cursor: pointer;\">\r\n            我已阅读并接受\r\n            <a href=\"#\" class=\"xieyi\">《易创用户协议》</a>\r\n        </li>\r\n        <div class=\"cuowu\" v-show=\"codepu\">验证码错误！</div>\r\n        <div class=\"cuowuphone\" v-show=\"phonepu\">未找到对对应的手机号或邮箱！</div>\r\n        <div class=\"cuowutrue\" v-show=\"cuow\">未勾选或未滑动!</div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport { reactive } from 'vue';\r\nexport default {\r\n    name: \"LRegister\",\r\n    data() {\r\n        return {\r\n            to: \"\",\r\n            code: \"\",\r\n            isDragging: false,\r\n            startX: 0,\r\n            thumbPosition: 0,\r\n            isVerified: false,\r\n            sliderWidth: 0,\r\n            yanzhang: \"发送验证码\",\r\n            data:reactive({}),\r\n            phonepu:false,\r\n            codepu:false,\r\n            isChecked:false,\r\n            truepu:false,\r\n            cuow:false\r\n        };\r\n    },\r\n    methods: {\r\n        //人机滑块验证\r\n        handleMouseDown(event) {\r\n            this.isDragging = true;\r\n            this.startX = event.clientX - this.thumbPosition;\r\n            document.addEventListener('mousemove', this.handleMouseMove);\r\n            document.addEventListener('mouseup', this.handleMouseUp);\r\n        },\r\n        handleMouseMove(event) {\r\n            if (this.isDragging) {\r\n                const distance = event.clientX - this.startX;\r\n                this.thumbPosition = Math.min(Math.max(distance, 0), this.sliderWidth);\r\n            }\r\n        },\r\n        handleMouseUp() {\r\n            this.isDragging = false;\r\n            document.removeEventListener('mousemove', this.handleMouseMove);\r\n            document.removeEventListener('mouseup', this.handleMouseUp);\r\n            // 验证滑块是否移动到最右侧\r\n            this.isVerified = this.thumbPosition === this.sliderWidth;\r\n            if (!this.isVerified) this.thumbPosition = 0;\r\n        },\r\n        // 发送验证码\r\n        sendCode(){\r\n            // 邮箱\r\n            const emailRegex = /^[a-zA-Z0-9._%+-]+@qq.com$/;\r\n            // 电话\r\n            const phoneRegex = /^\\d{11}$/;\r\n            if(emailRegex.test(this.to) || phoneRegex.test(this.to)){\r\n                this.yanzhang = '发送成功';\r\n                this.phonepu = false;\r\n                axios.get(\"http://localhost:8082/api/comsumer/login_before/register/mail_ObtainCode\", {\r\n                    params: {\r\n                        to: this.to\r\n                    }\r\n                }).then((response) => {\r\n                    this.$store.commit('mailBoxUP', this.to);\r\n                    this.data = response.data.data;\r\n                    console.log(this.data);\r\n                })\r\n            }else{\r\n                this.yanzhang = '发送验证码';\r\n                this.phonepu = true;\r\n            }\r\n        },\r\n        // 下一步跳转\r\n        gotolast(){\r\n            axios.post(\"http://localhost:8082/api/comsumer/login_before/register/mail_ProofCode\",{\r\n                to:this.to,\r\n                code:this.code\r\n            })\r\n            .then(response=>{\r\n                if(response.data.code == 200){\r\n                    this.codepu = false;\r\n                    if(this.truepu && this.isVerified){\r\n                        this.$router.push('/LRegisterA');\r\n                        this.cuow = false;\r\n                    } else this.cuow = true;\r\n                }else{\r\n                    this.codepu = true;\r\n                    this.yanzhang = '发送验证码';\r\n                }  \r\n            })\r\n        },\r\n    },\r\n    mounted() {\r\n        this.sliderWidth = this.$el.querySelector('.captcha-slider').offsetWidth - this.$el.querySelector('.captcha-slider-thumb').offsetWidth;\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.back {\r\n    position: absolute;\r\n    width: 28px;\r\n    height: 28px;\r\n    left: 14px;\r\n    top: 28px;\r\n    cursor: pointer;\r\n}\r\n\r\n.xian {\r\n    position: absolute;\r\n    width: 316px;\r\n    height: 2px;\r\n    top: 68px;\r\n    left: 7px;\r\n    border-top: 2px solid #aaa;\r\n}\r\n\r\n.title {\r\n    position: absolute;\r\n    width: 94px;\r\n    height: 32px;\r\n    left: 115px;\r\n    top: 30px;\r\n    color: #333;\r\n    font-weight: 800;\r\n    font-size: 18px;\r\n    text-align: center;\r\n}\r\n\r\n.zhanghao {\r\n    position: absolute;\r\n    width: 299px;\r\n    height: 33px;\r\n    top: 101px;\r\n    left: 13px;\r\n    font-size: 14px;\r\n    color: #000;\r\n    background-color: #eee;\r\n    border: 1px solid #797979;\r\n    border-radius: 5px;\r\n    padding: 2px 2px 2px 10px;\r\n    outline: none;\r\n}\r\n\r\n.code {\r\n    position: absolute;\r\n    width: 122px;\r\n    height: 33px;\r\n    left: 13px;\r\n    top: 215px;\r\n    background-color: #eee;\r\n    border-radius: 5px;\r\n    border: 1px solid #797979;\r\n    padding: 2px 2px 2px 10px;\r\n    font-size: 14px;\r\n    color: #000;\r\n    outline: none;\r\n}\r\n\r\n.sending {\r\n    position: absolute;\r\n    width: 111px;\r\n    height: 37px;\r\n    left: 213px;\r\n    top: 215px;\r\n    font-size: 14px;\r\n    background-color: #eee;\r\n    border-radius: 5px;\r\n    border: 1px solid #797979;\r\n    color: #666;\r\n    text-align: center;\r\n    line-height: 37px;\r\n    cursor: pointer;\r\n}\r\n\r\n.sending:hover{\r\n    color: #000;\r\n}\r\n\r\nbutton {\r\n    position: absolute;\r\n    width: 311px;\r\n    height: 37px;\r\n    left: 13px;\r\n    top: 271px;\r\n    font-size: 14px;\r\n    color: #fff;\r\n    background-color: #00B1FF;\r\n    border: none;\r\n    border-radius: 5px;\r\n    padding: 2px 2px 2px 10px;\r\n    cursor: pointer;\r\n}\r\n\r\nli {\r\n    position: absolute;\r\n    left: 30px;\r\n    top: 340px;\r\n    font-size: 16px;\r\n}\r\n\r\n.cuowu,\r\n.cuowuphone,\r\n.cuowutrue{\r\n    position: absolute;\r\n    height: 15px;\r\n    left: 24px;\r\n    font-size: 13px;\r\n    color: #FF0000;\r\n}\r\n\r\n.cuowu {\r\n    top: 254px;\r\n}\r\n\r\n.cuowuphone{\r\n    top: 140px;\r\n}\r\n\r\n.cuowutrue{\r\n    top: 365px;\r\n}\r\n\r\n/* 验证滑块 */\r\n.captcha-slider {\r\n    position: absolute;\r\n    top: 158px;\r\n    left: 13px;\r\n    width: 311px;\r\n    height: 37px;\r\n    font-size: 14px;\r\n    color: #666;\r\n    text-align: center;\r\n    line-height: 37px;\r\n    background-color: #eee;\r\n    user-select: none;\r\n    border: 1px solid #797979;\r\n    border-radius: 5px;\r\n}\r\n\r\n.captcha-slider-thumb {\r\n    position: absolute;\r\n    width: 39px;\r\n    height: 39px;\r\n    background-color: #fff;\r\n    background: url(\"../../../public/logIn/滑动.png\") no-repeat 100% 100% / cover;\r\n    cursor: pointer;\r\n    user-select: none;\r\n    border-radius: 5px;\r\n    margin-left: -1px;\r\n    margin-top: -1px;\r\n    z-index: 2;\r\n}\r\n\r\n.is-dragging .captcha-slider-thumb {\r\n    transition: none;\r\n}\r\n\r\n.captcha-verified {\r\n    position: absolute;\r\n    top: 158px;\r\n    left: 13px;\r\n    width: 311px;\r\n    height: 37px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    color: #000;\r\n    background-color: #00B1FF;\r\n    border-radius: 5px;\r\n    border: 1px solid #797979;\r\n}\r\n\r\n.tome{\r\n  position: absolute;\r\n  top: 158px;\r\n  left: 13px;\r\n  height: 37px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background-color: #00B1FF;\r\n  border-radius: 5px;\r\n  border: 1px solid #797979;\r\n  z-index: 1;\r\n}\r\n</style>"],"mappings":";AA+BA,OAAAA,KAAA;AACA,SAAAC,QAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,EAAA;MACAC,IAAA;MACAC,UAAA;MACAC,MAAA;MACAC,aAAA;MACAC,UAAA;MACAC,WAAA;MACAC,QAAA;MACAR,IAAA,EAAAF,QAAA;MACAW,OAAA;MACAC,MAAA;MACAC,SAAA;MACAC,MAAA;MACAC,IAAA;IACA;EACA;EACAC,OAAA;IACA;IACAC,gBAAAC,KAAA;MACA,KAAAb,UAAA;MACA,KAAAC,MAAA,GAAAY,KAAA,CAAAC,OAAA,QAAAZ,aAAA;MACAa,QAAA,CAAAC,gBAAA,mBAAAC,eAAA;MACAF,QAAA,CAAAC,gBAAA,iBAAAE,aAAA;IACA;IACAD,gBAAAJ,KAAA;MACA,SAAAb,UAAA;QACA,MAAAmB,QAAA,GAAAN,KAAA,CAAAC,OAAA,QAAAb,MAAA;QACA,KAAAC,aAAA,GAAAkB,IAAA,CAAAC,GAAA,CAAAD,IAAA,CAAAE,GAAA,CAAAH,QAAA,WAAAf,WAAA;MACA;IACA;IACAc,cAAA;MACA,KAAAlB,UAAA;MACAe,QAAA,CAAAQ,mBAAA,mBAAAN,eAAA;MACAF,QAAA,CAAAQ,mBAAA,iBAAAL,aAAA;MACA;MACA,KAAAf,UAAA,QAAAD,aAAA,UAAAE,WAAA;MACA,UAAAD,UAAA,OAAAD,aAAA;IACA;IACA;IACAsB,SAAA;MACA;MACA,MAAAC,UAAA;MACA;MACA,MAAAC,UAAA;MACA,IAAAD,UAAA,CAAAE,IAAA,MAAA7B,EAAA,KAAA4B,UAAA,CAAAC,IAAA,MAAA7B,EAAA;QACA,KAAAO,QAAA;QACA,KAAAC,OAAA;QACAZ,KAAA,CAAAkC,GAAA;UACAC,MAAA;YACA/B,EAAA,OAAAA;UACA;QACA,GAAAgC,IAAA,CAAAC,QAAA;UACA,KAAAC,MAAA,CAAAC,MAAA,mBAAAnC,EAAA;UACA,KAAAD,IAAA,GAAAkC,QAAA,CAAAlC,IAAA,CAAAA,IAAA;UACAqC,OAAA,CAAAC,GAAA,MAAAtC,IAAA;QACA;MACA;QACA,KAAAQ,QAAA;QACA,KAAAC,OAAA;MACA;IACA;IACA;IACA8B,SAAA;MACA1C,KAAA,CAAA2C,IAAA;QACAvC,EAAA,OAAAA,EAAA;QACAC,IAAA,OAAAA;MACA,GACA+B,IAAA,CAAAC,QAAA;QACA,IAAAA,QAAA,CAAAlC,IAAA,CAAAE,IAAA;UACA,KAAAQ,MAAA;UACA,SAAAE,MAAA,SAAAN,UAAA;YACA,KAAAmC,OAAA,CAAAC,IAAA;YACA,KAAA7B,IAAA;UACA,YAAAA,IAAA;QACA;UACA,KAAAH,MAAA;UACA,KAAAF,QAAA;QACA;MACA;IACA;EACA;EACAmC,QAAA;IACA,KAAApC,WAAA,QAAAqC,GAAA,CAAAC,aAAA,oBAAAC,WAAA,QAAAF,GAAA,CAAAC,aAAA,0BAAAC,WAAA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}